{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Button,Modal,Table}from\"react-bootstrap\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(_ref){let{show,handleClose,onCartChange}=_ref;const[cartItems,setCartItems]=useState([]);useEffect(()=>{const cart=JSON.parse(sessionStorage.getItem(\"cart\")||\"[]\");setCartItems(cart);},[show]);const handleQuantityChange=(itemId,newQuantity)=>{const updatedCart=cartItems.map(item=>{if(item.bookID===itemId){return{...item,quantity:Math.max(newQuantity,0)};}return item;}).filter(item=>item.quantity>0);sessionStorage.setItem(\"cart\",JSON.stringify(updatedCart));setCartItems(updatedCart);onCartChange===null||onCartChange===void 0?void 0:onCartChange();};const handleRemove=itemId=>{const updatedCart=cartItems.filter(item=>item.bookID!==itemId);sessionStorage.setItem(\"cart\",JSON.stringify(updatedCart));setCartItems(updatedCart);onCartChange===null||onCartChange===void 0?void 0:onCartChange();};const total=cartItems.reduce((sum,item)=>sum+item.price*item.quantity,0);return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cartItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>handleQuantityChange(item.bookID,item.quantity-1),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>handleQuantityChange(item.bookID,item.quantity+1),children:\"+\"})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(item.price*item.quantity).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:()=>handleRemove(item.bookID),children:\"Remove\"})})]},item.bookID))})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-end\",children:[\"Total: $\",total.toFixed(2)]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Continue Shopping\"})})]});}","map":{"version":3,"names":["useEffect","useState","Button","Modal","Table","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","_ref","show","handleClose","onCartChange","cartItems","setCartItems","cart","JSON","parse","sessionStorage","getItem","handleQuantityChange","itemId","newQuantity","updatedCart","map","item","bookID","quantity","Math","max","filter","setItem","stringify","handleRemove","total","reduce","sum","price","onHide","size","children","Header","closeButton","Title","Body","length","className","striped","bordered","hover","title","toFixed","variant","onClick","Footer"],"sources":["/Users/leonbuchmiller/Desktop/abc/IS413/Mission_13/frontend/src/components/Cart.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Button, Modal, Table } from \"react-bootstrap\";\nimport { Book } from \"./BookList\";\n\ninterface CartItem extends Book {\n  quantity: number;\n}\n\ninterface CartProps {\n  show: boolean;\n  handleClose: () => void;\n  onCartChange?: () => void;\n}\n\nexport default function Cart({ show, handleClose, onCartChange }: CartProps) {\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n\n  useEffect(() => {\n    const cart = JSON.parse(sessionStorage.getItem(\"cart\") || \"[]\");\n    setCartItems(cart);\n  }, [show]);\n\n  const handleQuantityChange = (itemId: number, newQuantity: number) => {\n    const updatedCart = cartItems\n      .map((item) => {\n        if (item.bookID === itemId) {\n          return { ...item, quantity: Math.max(newQuantity, 0) };\n        }\n        return item;\n      })\n      .filter((item) => item.quantity > 0);\n\n    sessionStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    setCartItems(updatedCart);\n    onCartChange?.();\n  };\n\n  const handleRemove = (itemId: number) => {\n    const updatedCart = cartItems.filter((item) => item.bookID !== itemId);\n    sessionStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    setCartItems(updatedCart);\n    onCartChange?.();\n  };\n\n  const total = cartItems.reduce(\n    (sum, item) => sum + item.price * item.quantity,\n    0\n  );\n\n  return (\n    <Modal show={show} onHide={handleClose} size=\"lg\">\n      <Modal.Header closeButton>\n        <Modal.Title>Shopping Cart</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {cartItems.length === 0 ? (\n          <p className=\"text-center\">Your cart is empty</p>\n        ) : (\n          <>\n            <Table striped bordered hover>\n              <thead>\n                <tr>\n                  <th>Title</th>\n                  <th>Price</th>\n                  <th>Quantity</th>\n                  <th>Subtotal</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {cartItems.map((item) => (\n                  <tr key={item.bookID}>\n                    <td>{item.title}</td>\n                    <td>${item.price.toFixed(2)}</td>\n                    <td>\n                      <div className=\"d-flex align-items-center gap-2\">\n                        <Button\n                          variant=\"outline-secondary\"\n                          size=\"sm\"\n                          onClick={() =>\n                            handleQuantityChange(item.bookID, item.quantity - 1)\n                          }\n                        >\n                          -\n                        </Button>\n                        <span>{item.quantity}</span>\n                        <Button\n                          variant=\"outline-secondary\"\n                          size=\"sm\"\n                          onClick={() =>\n                            handleQuantityChange(item.bookID, item.quantity + 1)\n                          }\n                        >\n                          +\n                        </Button>\n                      </div>\n                    </td>\n                    <td>${(item.price * item.quantity).toFixed(2)}</td>\n                    <td>\n                      <Button\n                        variant=\"danger\"\n                        size=\"sm\"\n                        onClick={() => handleRemove(item.bookID)}\n                      >\n                        Remove\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n            <h4 className=\"text-end\">Total: ${total.toFixed(2)}</h4>\n          </>\n        )}\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={handleClose}>\n          Continue Shopping\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}